services:
    nest:
        build:
            context: ./src/infrastructure/frameworks/nest
            dockerfile: Dockerfile
        environment:
            - PORT=3000
            - MONGO_URL=mongodb://root:password@mongo:27017/app?authSource=admin
            - DATABASE_URL=postgres://root:password@postgres:5432/app
            - JWT_SECRET=secret
            - MAILER_SERVICE=Gmail
            - MAILER_HOST=smtp.gmail.com
            - MAILER_PORT=465
            - BASE_URL=http://localhost:3000
            - NODE_ENV=development
        ports:
            - "127.0.0.1:3000:3000"
        depends_on:
            - mongo
            - postgres
        volumes:
            - ./src/infrastructure/frameworks/nest:/app/nest
